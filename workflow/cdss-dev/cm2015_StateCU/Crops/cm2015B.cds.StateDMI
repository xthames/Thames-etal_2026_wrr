#
# 2015 Model Refinements
#    Same as cm2015.cds.StateDMI except only use 2010 acreage for entire period
#
# Step 1 - Set output period and read CU locations
SetOutputPeriod(OutputStart="1909",OutputEnd="2013")
ReadCULocationsFromStateCU(InputFile="..\StateCU\cm2015.str")
# Step 2 - Read SW aggregates
SetDiversionSystemFromList(ListFile="..\DiversionsCU\cm_divsys_crop.lst",IDCol=1,NameCol=2,PartIDsCol=3,PartsListedHow=InRow,IfNotFound=Warn)
SetDiversionSystemFromList(ListFile="..\DiversionsCU\cm_multistr.lst",IDCol=1,NameCol=2,PartIDsCol=3,PartsListedHow=InRow)
SetDiversionAggregateFromList(ListFile="..\DiversionsCU\cm_agg.lst",IDCol=1,PartIDsCol=2,PartsListedHow=InColumn)
SetDiversionAggregateFromList(ListFile="..\DiversionsCU\cm_agg_nodiv.lst",IDCol=1,PartIDsCol=2,PartsListedHow=InColumn)
# Step 3 - Create *.cds file form and read acreage/crops from HydroBase
CreateCropPatternTSForCULocations(ID="*",Units="ACRE")
ReadCropPatternTSFromHydroBase(ID="*",InputStart="2010",InputEnd="2010")
# Step 3a - Fill Acreage
FillCropPatternTSRepeat(ID="*",CropType="*",FillStart=1909,FillEnd=2010,FillDirection=Backward)
FillCropPatternTSRepeat(ID="*",CropType="*",FillStart=2010,FillEnd=2013,FillDirection=Forward)
# Step 4 - Need to translate crops out of HB to include TR21 suffix
# Translate all crops from HB to include .TR21 suffix
TranslateCropPatternTS(ID="*",OldCropType="GRASS_PASTURE",NewCropType="GRASS_PASTURE.TR21")
TranslateCropPatternTS(ID="*",OldCropType="CORN_GRAIN",NewCropType="CORN_GRAIN.TR21")
TranslateCropPatternTS(ID="*",OldCropType="ALFALFA",NewCropType="ALFALFA.TR21")
TranslateCropPatternTS(ID="*",OldCropType="SMALL_GRAINS",NewCropType="SPRING_GRAIN.TR21")
TranslateCropPatternTS(ID="*",OldCropType="VEGETABLES",NewCropType="VEGETABLES.TR21")
TranslateCropPatternTS(ID="*",OldCropType="ORCHARD_WO_COVER",NewCropType="ORCHARD_WO_COVER.TR21")
TranslateCropPatternTS(ID="*",OldCropType="ORCHARD_WITH_COVER",NewCropType="ORCHARD_WITH_COVER.TR21")
TranslateCropPatternTS(ID="*",OldCropType="DRY_BEANS",NewCropType="DRY_BEANS.TR21")
TranslateCropPatternTS(ID="*",OldCropType="GRAPES",NewCropType="GRAPES.TR21")
TranslateCropPatternTS(ID="*",OldCropType="WHEAT",NewCropType="SPRING_GRAIN.TR21")
TranslateCropPatternTS(ID="*",OldCropType="SUNFLOWER",NewCropType="SPRING_GRAIN.TR21")
TranslateCropPatternTS(ID="*",OldCropType="SOD_FARM",NewCropType="GRASS_PASTURE.TR21")
TranslateCropPatternTS(ID="*",OldCropType="BLUEGRASS",NewCropType="BLUEGRASS.POCHOP")
# Step 5 - Translate crop names
# Use high-altitude coefficients for structures in which the headgate location is above 6500 feet
TranslateCropPatternTS(ListFile="cm2015_HA.lst",IDCol=1,OldCropType="GRASS_PASTURE.TR21",NewCropType="GRASS_PASTURE.DWHA")
# add irrigation portion of Martin Crawford Ditch for 30 acres per Heather Thompson information from Steve Ryken
SetCropPatternTS(ID="7200764_I",CropPattern="GRASS_PASTURE.TR21,30",IrrigationMethod=Flood,SupplyType=Surface)
# Step 6 - Set missing crop types to zero
# Structures in the data set without acreage in 2010 are set to -999. Change to (fill with) zero.
FillCropPatternTSConstant(ID="*",CropType="*",Constant=0)
# Step 7 - Write final *.cds file
WriteCropPatternTSToStateCU(OutputFile="..\StateCU\cm2015B.cds",WriteCropArea=True,WriteHow=OverwriteFile)
